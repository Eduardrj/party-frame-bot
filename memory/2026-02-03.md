2026-02-03 UTC - Imported from backup (openclaw-backup-2026-02-02)

Resumo de eventos importantes e contexto recuperado:

- Incidente (2026-02-02): OpenClaw gateway temporariamente exposto (gateway.bind alterado para 0.0.0.0) para restaurar conectividade. Foi identificado risco de exposição e o usuário autorizou ações de contenção.
- Ações executadas com autorização do usuário:
  - Rotação do token do gateway (novo prefixo registrado no backup). Arquivo ~/.openclaw/openclaw.json atualizado com o novo token.
  - Backup criado e preservado: /root/.openclaw/backups/openclaw-backup-2026-02-02.tar.gz
  - Configurações .bak mantidas como histórico (/root/.openclaw/openclaw.json.bak*)
  - Dashboard local e endpoints /api/status e /api/backup preparados; integração Supabase iniciada mas bloqueada por 401 (chave service_role incorreta) e por egress bloqueado para Postgres.
  - Preparação de node-host e instruções para WSL/Chrome extension e Tailscale encaminhadas; testes de conectividade realizados (PC Tailscale: 100.125.213.50). Problemas detectados: gateway local ocupava 127.0.0.1:18792 e WSL<>Windows networking exigiu portproxy ou túnel; alternativas propostas.

- Problemas pendentes ou bloqueios técnicos relevantes:
  - Supabase REST retornou HTTP/401 (Invalid API key). Ação recomendada: copiar o service_role key correto para ~/.openclaw/credentials/supabase.key (perms 600) ou rodar SQL no Console.
  - Egress TCP para db.atjwqislcwftzaohyhtt.supabase.co:5432 falhou (Network is unreachable) — impede uso direto de psql do VPS.
  - Node-host reachability: VPS não conseguia alcançar PC via Tailscale em 18793; portproxy e firewall no Windows configurados como workaround; túnel SSH reverso (R) foi proposto como alternativa.

- Observações operacionais do backup:
  - Há um prompt de agente antigo (Clawdbot) em agents_factory/prompt_clawdbot.txt contendo instruções e template RAG que podem ser reaproveitadas.
  - Projeto interativixbot com migrations e funções para Supabase foi incluído no backup (pasta interativixbot/repo/supabase).
  - USER.md, SOUL.md e AGENTS.md estão presentes no workspace do backup; USER.md confirma preferências e perfil do usuário (Eduardo) e SOUL.md contém o tom e regras do agente.

---

LOGS (resumo extraído do backup)
- Encontradas diversas execuções e outputs em sessions logs (.jsonl) contendo erros e falhas reproduzíveis:
  - Vários comandos psql/apt falharam por DNS/resolução e egress ("Could not resolve 'download.supabase.com'", "Network is unreachable").
  - Comandos relacionados a hardening (ufw/sysctl) reportaram "ERROR: problem running sysctl" durante aplicação de regras.
  - Execuções automáticas tentaram aplicar supabase_schema.sql via psql e falharam por rede.
  - Mensagens de erro e stacktraces mostraram falta de dependências Python (ModuleNotFoundError: No module named 'ruamel') em alguns scripts de automação.
  - Logs de status mostram gateways e channels: Telegram ON, WhatsApp ON, gateway listening on ws://127.0.0.1:18789; reconnects WhatsApp com status 428/503 observados.

---

CONFIGS (diffs e observações)
- Existem múltiplas cópias de ~/.openclaw/openclaw.json (.bak, .bak.1, .bak.3, .bak.4). Elas devem ser comparadas antes de restauração.
- Observação principal: erros anteriores no journal eram "gateway.bind: Invalid input" — revisar o campo gateway.bind nas cópias .bak para identificar quando foi alterado para 0.0.0.0 e restaurar para "loopback" se desejado.

---

INTERATIVIXBOT (resumo do projeto e impacto de exucutar ou não)
- Conteúdo principal: migrations SQL, funções serverless (cron-scheduler, whatsapp-connect, whatsapp-webhook, etc.), templates de email.
- Se executarmos as migrations e funções no Supabase:
  - Pró: Módulos de automação (reminders, whatsapp-send, scheduler) ficam operacionais; permite integrar WhatsApp/Supabase para reminders e dispatch.
  - Contras: Requer credenciais válidas (service_role) e egress ativo do VPS; executar sem testar pode expor chaves/API ou gerar erros se dependências faltarem.
- Recomendações: revisar e adaptar migrations para o schema atual, testar flow em staging Supabase antes de deploy em produção.

---

CREDENTIALS INVENTORY (index only)
- /root/.openclaw/credentials/supabase.key    # Supabase service role or anon key (file, perms 600)
- /root/.openclaw/credentials/supabase_pg.url # Postgres connection URL (may include host/user)
- /root/.openclaw/credentials/nodehost.token  # Node-host token for browser relay
- /root/.openclaw/openclaw.json               # Gateway config (contains gateway.auth.token / gateway.remote.token)
- /root/.openclaw/openclaw.json.bak*          # Historical config snapshots (may include previous tokens)
- /root/.openclaw/backups/openclaw-backup-2026-02-02.tar.gz  # Backup archive (contains older tokens and bot tokens)
- .openclaw/telegram/bot.token (inside backup)               # Telegram bot token found in backup
- .openclaw/identity/device-auth.json (inside backup)        # Device auth file found in backup
- /root/.openclaw/workspace/agents_factory/prompt_clawdbot.txt  # contains agent prompt artifacts (no secrets expected)
- /root/.openclaw/workspace/interativixbot/ (repo)            # project files; may include SRK placeholders or templates with creds
- session logs (.jsonl) inside backup: .openclaw/agents/main/sessions/*.jsonl  # may contain inline PGPASSWORD or API keys in command history

Notes:
- No secrets recorded here. This inventory is for internal use only. Treat backup archive as sensitive.

---

Ação tomada: gravei este resumo em /root/.openclaw/workspace/memory/2026-02-03.md (sobrescrevendo o arquivo existente com info combinada). Se preferir, posso criar uma nova entrada separada (2026-02-03-merged.md) em vez de sobrescrever.

Próximo passo (uma instrução por vez):
- "confirmar" → mantenho este arquivo como memória persistente (já salvo).
- "separar" → crio uma cópia separada /root/.openclaw/workspace/memory/2026-02-03-merged.md em vez de sobrescrever.
- "extrair-mais-logs" → eu busco e resumo logs adicionais (ex.: /tmp/openclaw/openclaw-*.log) e os adiciono à memória.
- "mostrar-memoria" → eu mostro o conteúdo que acabei de gravar.

Fonte: /root/.openclaw/backups/openclaw-backup-2026-02-02.tar.gz

— Assistente (resumo automático)